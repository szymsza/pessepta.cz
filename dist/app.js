!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);class i{static say(e,n=!1){if(!window.sound&&""!=e)return!1;if(n&&("array"==typeof e||"object"==typeof e))return i.say(e[Math.floor(Math.random()*e.length)]);if("string"==typeof e)return responsiveVoice.speak(e,"Czech Female",{onstart:this._openMouth,onend:this._closeMouth});var t=this;responsiveVoice.speak(e[0],"Czech Female",{onstart:t._openMouth,onend:function(){if(t._closeMouth(),e.shift(),!e.length)return!1;var n=100;"number"==typeof e[0]&&(n=e[0]),setTimeout(function(){"number"==typeof e[0]&&e.shift(),t.say(e)},n)}})}static _openMouth(){$(".hund>img").attr("src","assets/imgs/seznam_hund.gif")}static _closeMouth(){$(".hund>img").attr("src","assets/imgs/seznam_hund.png")}static play(e){if(!window.sound)return!1;new Audio("assets/audio/"+e).play()}static toggleSound(){$(".hund>span>img").attr("src","assets/imgs/sound-o"+(window.sound?"ff":"n")+".png"),window.sound=!window.sound,window.sound||(i.say(""),setTimeout(i._closeMouth,200))}}class o{constructor(e,n){++window.game.currentPlayer>=window.game.players.length&&($(".round_wrapper .round").text(++window.game.round),window.game.currentPlayer=0),this.page=n,this.data=e,this.isGuessed=!1}render(){var e=this.data[0].text,n=this.data[1].text,t=["Myslíš si, že je vyhledávanější "+e+", nebo "+n+"?","Je podle tebe vyhledávanější "+e+", nebo "+n+"?","Jaký dotaz lidé zadávají častěji? "+e+", nebo "+n],o=t[Math.floor(Math.random()*t.length)],a=["Nyní je na řadě ","Teď bude hrát ","Pozor pozor, přichází ","Na řadu se dostává "],s=a[Math.floor(Math.random()*a.length)];window.game.players.length>1?($(".points .tab .active").removeClass("active"),$(".points .tab:nth-child("+(parseInt(window.game.currentPlayer)+1)+") a").addClass("active"),i.say([s+window.game.players[window.game.currentPlayer].name,o])):($(".points .tab a").addClass("active"),i.say(o)),annyang&&annyang.removeCommands(),this._fillCard(this.page.find(".row .col:first-child .card"),this.data[0]),this._fillCard(this.page.find(".row .col:nth-child(2) .card"),this.data[1]),this.page.find(".button-wrapper").hide()}_fillCard(e,n){e.find(".card-action").text(n.text),e.find("img").attr("src",n.image),e.find(".card-title").toggleClass("winning",n.count==this.data.winner).text(n.countText).hide(),e.parent().find("a").attr("href","https://search.seznam.cz/?q="+encodeURI(n.text));var t=this;if(annyang){var i={};i[n.text]=function(){t.isGuessed||t._makeGuess(n)},annyang.addCommands(i),annyang.start()}e.off().on("click",function(){this.isGuessed||this._makeGuess(n)}.bind(this))}_makeGuess(e){this.isGuessed=!0,this.data.winner==e.count?(i.play("right.mp3"),i.say(["Máš pravdu, "+e.text+" je vyhledávanější.","Je to tak. Jupí!","Taky si myslím, dobrá práce.","Přesně tak. Jen tak dál!"],!0),$("li:nth-child("+(parseInt(window.game.currentPlayer)+1)+") .points_received").text(++window.game.players[window.game.currentPlayer].points)):(i.play("wrong.mp3"),i.say(["Mrzí mě to, ale není to tak","Bohužel tvá odpověď není správná","Bylo to těsné, ale ne","Příště se zadaří","Tentovkát to bohužel "+e.text+" není","Bohužel, "+e.text+" je méně vyhledávaný"],!0)),this._updatePoints();var n=this;if(annyang){annyang.removeCommands();var t={"pokračovat":function(){n.page.find(".button-wrapper").click()}};annyang.addCommands(t),annyang.start()}this.page.find(".card-title, .button-wrapper").fadeIn(350),this.page.find(".button-wrapper").off().on("click",function(){var e=new a;window.game.questions.length?e.move("questions"):(e.move("finished"),this._endGame())}.bind(this))}_endGame(){if(window.game.players.sort(function(e,n){return e.points>n.points?-1:e.points<n.points?1:0}),window.game.players.length>1)var e="Gratuluji hráči "+window.game.players[0].name+" k vítězství!";else{var n=window.game.players[0].points;e="Získal jsi "+n+" bod"+(1==n?"":n>4||0==n?"ů":"y")+" z "+$(".points .points_total")[0].innerText+"."}i.say(["Konec hry!",e,"Chceš hrát znovu?"])}_updatePoints(){$(".points_received").text(window.game.points)}static loadQuestions(){$.ajax("api",{data:{type:"question",categories:window.selectedCategories,settings:window.gameSettings}}).done(function(e){window.game.questions=e,window.game.currentPlayer=-1,window.game.round=1,$(".points li:nth-child(n+2)").remove();for(let e in window.game.players){let n=window.game.players[e];if(!$(".points li:nth-child("+(parseInt(e)+1)+")").length)$(".points li:first-child").clone().appendTo($(".points ul"));$(".points li:nth-child("+(parseInt(e)+1)+")").find(".points_name").text(n.name)}$(".points_total, .round_wrapper .total").text(e.length/window.game.players.length),$(".points_received").text(0),$(".round_wrapper .round").text(1),(new a).move("questions")})}}class a{constructor(){this.afterMove={login:function(e){e.find("button").off().on("click",function(){var e=new a;"single"==$(this).data("type")?(window.game={players:[{name:"Skóre",points:0}]},e.move("settings"),i.say(["tak fajn, budeme hrát spolu","přizpůsob si hru podle svých představ"])):e.move("multiplayer")})},categories:function(e){i.say(["vyber si své soutěžní otázky"]),e.find("input[type=checkbox]").off().on("change",function(){var e=$(this).parent().next();if(!e.hasClass("subcategories"))return!1;e.find("input").prop("checked",this.checked)}),e.find(".subcategories input[type=checkbox]").off().on("change",function(){var e=$(this).parent().parent(),n=e.prev().find("input")[0];return this.checked?n.checked=!0:!e.find("input:checked").length&&void(n.checked=!1)}),e.find("button").off().on("click",function(){if(!e.find("input[type=checkbox]:checked").length)return i.say("vyber si prosím kategorie, se kterými chceš hrát");var n=[];e.find(".col input:checked").each(function(){n.push($(this).data("value"))}),window.selectedCategories=n,o.loadQuestions()})},questions:function(e){new o(window.game.questions[0],e).render(),window.game.questions.shift()},settings:function(e){e.find("button").off().on("click",function(){window.gameSettings={difficult:$("input[name=difficult]:checked").val(),period:$("input[name=period]:checked").val(),rounds:$("input[name=rounds]:checked").val()*window.game.players.length},(new a).move("categories")})},finished:function(e){var n=$(".points .points_total")[0].innerText;if(window.game.players.length>1){for(let e in window.game.players){let t=window.game.players[e];$("#page-finished .multi-result ol").append("<li>"+t.name+" ("+t.points+" z "+n+")")}$("#page-finished .multi-result").show(),$("#page-finished .single-result").hide()}else $("#page-finished .single-result").find(".points_received").text(window.game.players[0].points),$("#page-finished .single-result").find(".points_total").text(n),$("#page-finished .multi-result").hide(),$("#page-finished .single-result").show();e.find("button").off().on("click",function(){(new a).move("login")})},multiplayer:function(e){i.say(["zadej prosím jména jednotlivých hráčů"]),$(document).on("click",".remove-row",function(){$(this).closest(".row").remove()}),e.find(".add-row").off().on("click",function(){var e=$("#page-multiplayer .container .row:first-child").clone();e.find("input").val(""),e.insertAfter($("#page-multiplayer .container .row:nth-last-child(2)")),e.find("input").focus()}),e.find(".continue-button").off().on("click",function(){var n=[];(e.find("input[type=text]").each(function(){var e=$(this).val().trim();if(""==e)return i.say("Vyplň prosím jména všech hráčů."),n=!1,!1;n.push({name:e,points:0})}),n)&&(window.game={players:n},(new a).move("settings"))})}}}move(e){var n=this;if(!$("#pages>div:visible").length)return this._showPage(e);$("#pages>div:visible").fadeOut(200,function(){n._showPage(e)})}_showPage(e){var n=$("#pages>#page-"+e),t=this;annyang&&"question"!=e&&(annyang.removeCommands(),annyang.abort()),n.fadeIn(200,function(){$(".points, .round_wrapper").toggleClass("hide","questions"!=e);var i=t.afterMove[e];i&&i(n)})}}function s(){i.say(["haf haf!","ahoj seznamáku!","vítej ve hře Pes se ptá","moje jméno je Krasty, jsem pes ze seznamu a budu tě touto hrou provázet","chceš hrát sám, nebo s přáteli?"])}$(document).ready(function(){var e=new a;e.move("login"),setTimeout(function(){document.hasFocus()?s():$(window).one("focus",s)},500),$(".hund>img").click(function(){i.say("haf haf")}),$(".home-icon").click(function(){e.move("login")}),window.sound=!0,$(".hund>span>img").click(i.toggleSound)})}]);